@model parc_auto_v1.Models.Demandes

@{
    ViewData["Title"] = "Demande Details";
}

<h1>Demande Details</h1>

<div>
    <h4>Demande</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">Nom</dt>
        <dd class="col-sm-10">@Model.Nom</dd>

        <dt class="col-sm-2">Prenom</dt>
        <dd class="col-sm-10">@Model.Prenom</dd>

        <dt class="col-sm-2">Id Employe</dt>
        <dd class="col-sm-10">@Model.IdEmploye</dd>

        <dt class="col-sm-2">Affectation Departement</dt>
        <dd class="col-sm-10">@Model.AffectationDepartement</dd>

        <dt class="col-sm-2">Type Voiture</dt>
        <dd class="col-sm-10">@Model.TypeVoiture</dd>

        <dt class="col-sm-2">Destination</dt>
        <dd class="col-sm-10">@Model.Destination</dd>

        <dt class="col-sm-2">Date Depart</dt>
        <dd class="col-sm-10">@Model.DateDepart.ToShortDateString()</dd>

        <dt class="col-sm-2">Date Arrivee</dt>
        <dd class="col-sm-10">@Model.DateArrivee.ToShortDateString()</dd>

     

        <dt class="col-sm-2">Description</dt>
        <dd class="col-sm-10">@Model.Description</dd>

        <dt class="col-sm-2">Mission</dt>
        <dd class="col-sm-10">@Model.Mission</dd>

        <dt class="col-sm-2">Etat</dt>
        <dd class="col-sm-10">@Model.Etat</dd>

        <dt class="col-sm-2">Matricule</dt>
        <dd class="col-sm-10">@Model.Voiture?.Matricule</dd>

    </dl>
</div>

@if (Model.Etat != "Accepted" && Model.Etat != "Refused")
{
    <div>
        <h4>Accept Demande</h4>
        <form asp-action="ConfirmAcceptance" method="post">
            <input type="hidden" name="id" value="@Model.Id" />

            <div class="form-group">
                <label for="voitureId">Select a Car:</label>
                <select name="voitureId" class="form-control">
                    <option value="">-- Select a Car --</option>
                    @foreach (var voiture in ViewBag.AvailableVoitures)
                    {
                        <option value="@voiture.Id">@voiture.Marque @voiture.Modele</option>
                    }
                </select>
            </div>

            <button type="submit" name="action" value="Accept" class="btn btn-success">Accept</button>
            <button type="submit" name="action" value="Refuse" class="btn btn-danger">Refuse</button>
        </form>
    </div>
}

<div>
    <a asp-action="Index" class="btn btn-primary">Back to List</a>
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">Edit</a>
</div>
